# Лабораторная работа по Функциональному программированию №3

**Выполнила Козырева Эмилия, ИСУ - 394031.**

[![CI Pipeline]([https://github.com/Rrackoon/functional-programming-lab2/actions/workflows/ci.yml/badge.svg)](https://github.com/Rrackoon/functional-programming-lab2/actions/workflows/ci.yml](https://github.com/Rrackoon/func-prog-lab3/actions/runs/19435627591))

# Требования к разработанному программному обеспечению

Программа предназначена для потоковой интерполяции входных данных, поступающих из стандартного ввода или файла.  
Ключевая цель — обеспечить обработку данных в режиме реального времени с использованием заданного алгоритма интерполяции и генерацией промежуточных значений с указанным шагом.

## Функциональные требования

1. **Поддерживаемые алгоритмы интерполяции:**
   - линейная интерполяция (отрезками);
   - интерполяция полиномом Ньютона;
   - режим смешанной работы (выбор алгоритма по количеству точек).

2. **Передача настроек через аргументы командной строки:**
   - `--linear` — использовать линейную интерполяцию;
   - `--newton` — использовать интерполяцию Ньютона;
   - `--step <float>` — шаг дискретизации генерируемых значений;
   - `--points <int>` — размер окна для алгоритмов, где требуется несколько точек;
   - путь к файлу (необязательно).

3. **Формат входных данных:**
   - текстовый поток (`stdin` или файл);
   - строки вида `x y`, `x;y`, `x<tab>y`;
   - точки отсортированы по возрастанию `x`.

4. **Поведение программы:**
   - работает в потоковом режиме (аналогично `cat | grep`);
   - по мере поступления данных формирует скользящее окно;
   - после накопления достаточного числа точек выполняет интерполяцию;
   - генерирует промежуточные значения `x` внутри текущего окна;
   - выводит результаты в стандартный вывод.

5. **Выходной формат:**

# Описание алгоритма и ключевых компонент

## 1. Модуль `Interpolator`
Отвечает за выбор алгоритма интерполяции.  
На основе переданных опций выбирает:

- линейную интерполяцию, если есть две точки;
- полином Ньютона для N ≥ 3;
- смешанный режим, когда выбор делается по количеству точек.

Также включает тестовый метод выбора интерполятора строго по количеству точек.

---

## 2. Модуль `LinearInterpolator`
Реализует линейную интерполяцию по двум точкам `{x0, y0}` и `{x1, y1}`:

- вычисляет коэффициенты прямой:  
`k = (y1 - y0) / (x1 - x0)`  
`b = y0 - k * x0`
- возвращает функцию `f.(x) = kx + b`.

---

## 3. Модуль `NewtonInterpolator`
Строит полином Ньютона:

- извлекает массивы `xs` и `ys`;
- вычисляет таблицу разделённых разностей;
- формирует коэффициенты полинома;
- создаёт функцию `f.(x)` вида: f(x) = c0 + c1(x−x0) + c2(x−x0)(x−x1) + ...
  ## 4. Модуль `Window`
Реализует «скользящее окно»:

- хранит последние `N` точек;
- при добавлении нового значения удаляет самые старые;
- сообщает, достаточно ли точек набрано для выполнения интерполяции.

---

## 5. Модуль `PointSelector`
Определяет, готово ли окно для проведения интерполяции:

- 2 точки для линейной;
- `size` точек для Ньютона;
- смешанная логика в комбинированном режиме.

---

## 6. Модуль `XGenerator`
Создаёт поток значений `x` с шагом `step` между `x0` и `x1`:

- использует ленивый поток `Stream.unfold/2`;
- гарантирует корректный выход за границы с учётом погрешности.

---

## 7. Модуль `Printer`
Форматирует и печатает результаты:

- каждая строка: `<label>: <x> <y>`;
- формат чисел — компактный `float` с 6 знаками после запятой.

---

## 8. Модуль `Reader`
Отвечает за чтение входных данных:

- принимает данные из файла или `stdin`;
- построчно парсит `x` и `y`;
- передаёт точки оркестратору через сообщения процесса;
- по завершении отправляет `:eof`.

---

## 9. Модуль `Orchestrator`
Центральная управляющая логика:

- запускает цикл обработки потока;
- принимает точки через `receive`;
- обновляет окно;
- когда точки готовы — строит интерполятор;
- генерирует промежуточные значения;
- печатает результаты;
- в конце обрабатывает “хвост”, интерполируя последний интервал.
